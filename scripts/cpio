#!/usr/bin/env bash
# This file is part of the OpenADK project. OpenADK is copyrighted
# material, please see the LICENCE file in the top-level directory.

opt=
user="-R 0:0"
os=$(uname)
case $os in
	NetBSD|MirBSD|OpenBSD)
		quiet=""
		;;
	Darwin)
		user="-R root:wheel"
		quiet=""
		;;
	*)
		quiet="--quiet"
		;;
esac
if [ "$2" = "r" ];then
	opt=$user
fi
cmd=$(echo "$@"|sed -e "s# r ##")
if [ -x /usr/bin/cpio ];then
	/usr/bin/cpio $quiet $opt $cmd
else
	/bin/cpio $quiet $opt $cmd
fi
