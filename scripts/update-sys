#!/usr/bin/env bash
# create Config.in.systems with all available target systems for each architecture

topdir=$(readlink -nf $(dirname $0)/.. 2>/dev/null || (cd $(dirname $0)/..; pwd -P))

echo 'source "target/config/Config.in.arch.default"' > $topdir/target/config/Config.in.arch
echo 'source "target/config/Config.in.arch.choice"' >> $topdir/target/config/Config.in.arch
echo 'source "target/config/Config.in.system.default"' > $topdir/target/config/Config.in.system
echo 'source "target/config/Config.in.system.choice"' >> $topdir/target/config/Config.in.system

for i in $(ls $topdir/target/);do
	if [ -d "$topdir/target/$i/sys-enabled" ];then
		cat $topdir/target/$i/sys-enabled/* > $topdir/target/$i/Config.in.systems 2>/dev/null
	fi
done
exit 0
