diff -Nur glibc-2.12.1.orig/sysdeps/generic/netinet/ip.h glibc-2.12.1/sysdeps/generic/netinet/ip.h
--- glibc-2.12.1.orig/sysdeps/generic/netinet/ip.h	2010-07-27 13:34:39.000000000 +0200
+++ glibc-2.12.1/sysdeps/generic/netinet/ip.h	2010-10-13 15:00:56.000000000 +0200
@@ -194,7 +194,7 @@
  */
 
 #define	IPTOS_CLASS_MASK		0xe0
-#define	IPTOS_CLASS(class)		((tos) & IPTOS_CLASS_MASK)
+#define	IPTOS_CLASS(class)		((class) & IPTOS_CLASS_MASK)
 #define	IPTOS_CLASS_CS0			0x00
 #define	IPTOS_CLASS_CS1			0x20
 #define	IPTOS_CLASS_CS2			0x40
