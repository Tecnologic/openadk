--- polkit-0.112.orig/src/polkitbackend/polkitbackendjsauthority.c	2013-09-18 18:55:09.000000000 +0200
+++ polkit-0.112/src/polkitbackend/polkitbackendjsauthority.c	2014-01-11 11:27:02.000000000 +0100
@@ -29,6 +29,7 @@
 #include <glib/gstdio.h>
 #include <locale.h>
 #include <glib/gi18n-lib.h>
+#include <sys/wait.h>
 
 #include <polkit/polkit.h>
 #include "polkitbackendjsauthority.h"
@@ -1450,13 +1451,16 @@ js_polkit_user_is_in_netgroup (JSContext
   JSBool ret = JS_FALSE;
   JSString *user_str;
   JSString *netgroup_str;
-  char *user;
-  char *netgroup;
   JSBool is_in_netgroup = JS_FALSE;
 
   if (!JS_ConvertArguments (cx, argc, JS_ARGV (cx, vp), "SS", &user_str, &netgroup_str))
     goto out;
 
+#if defined(HAVE_INNETGR)
+  {
+  char *user;
+  char *netgroup;
+
   user = JS_EncodeString (cx, user_str);
   netgroup = JS_EncodeString (cx, netgroup_str);
 
@@ -1470,6 +1474,8 @@ js_polkit_user_is_in_netgroup (JSContext
 
   JS_free (cx, netgroup);
   JS_free (cx, user);
+  }
+#endif
 
   ret = JS_TRUE;
 
