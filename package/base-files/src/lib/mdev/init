#!/bin/sh
if [ "$SUBSYSTEM" == "firmware" ];then
        logger "Firmware load for $FIRMWARE requested"
        if [ "$ACTION" == "add" ];then
                if [ -e "/lib/firmware/$FIRMWARE" ];then
                        logger "Firmware loading ..."
                        echo 1 > /sys$DEVPATH/loading
                        cat "/lib/firmware/$FIRMWARE" > /sys$DEVPATH/data
                        echo 0 > /sys$DEVPATH/loading
                        logger "finished."
                else
                        logger "Firmware file $FIRMWARE not found"
                        echo -1 > /sys$DEVPATH/loading
                fi
        fi
fi
if [ "$SUBSYSTEM" == "pcmcia_socket" ];then
	logger "Setting up PCMCIA socket resource database"
	if [ "$ACTION" == "add" ];then
		/usr/sbin/pcmcia-socket-startup
	fi
fi
if [ "$SUBSYSTEM" == "usb" ];then
	if [ "$ACTION" == "add" ];then
		if [ "$DEVTYPE" == "usb_device" ];then
			logger "USB device added with: $PRODUCT"
			if [ "$PRODUCT" == "12d1/1003/0" ];then
				test -x /sbin/huawei && /sbin/huawei
			fi
		fi
	fi
fi
