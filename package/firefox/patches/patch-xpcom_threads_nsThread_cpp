--- mozilla-2.0.orig/xpcom/threads/nsThread.cpp	2011-03-19 00:34:14.000000000 +0100
+++ mozilla-2.0/xpcom/threads/nsThread.cpp	2011-06-15 19:51:07.078202253 +0200
@@ -50,11 +50,13 @@
                       _XOPEN_SOURCE && _XOPEN_SOURCE_EXTENDED) &&           \
                       !(_POSIX_C_SOURCE >= 200809L || _XOPEN_SOURCE >= 700)
 
+#include <features.h>
 #if defined(XP_UNIX) && !defined(ANDROID) && !defined(DEBUG) && HAVE_UALARM \
   && defined(_GNU_SOURCE)
-# define MOZ_CANARY
 # include <unistd.h>
+#if !defined(__UCLIBC__)
 # include <execinfo.h>
+#endif
 # include <signal.h>
 # include <fcntl.h>
 # include "nsXULAppAPI.h"
