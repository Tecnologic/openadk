--- e2fsprogs-1.42.8.orig/lib/ext2fs/unix_io.c	2013-04-22 01:05:50.000000000 +0200
+++ e2fsprogs-1.42.8/lib/ext2fs/unix_io.c	2013-08-14 13:31:40.000000000 +0200
@@ -22,6 +22,9 @@
 #endif
 
 #include "config.h"
+#if HAVE_STDINT_H
+#include <stdint.h>
+#endif
 #include <stdio.h>
 #include <string.h>
 #if HAVE_UNISTD_H
@@ -931,10 +934,10 @@ static errcode_t unix_discard(io_channel
 
 	if (channel->flags & CHANNEL_FLAGS_BLOCK_DEVICE) {
 #ifdef BLKDISCARD
-		__uint64_t range[2];
+		uint64_t range[2];
 
-		range[0] = (__uint64_t)(block) * channel->block_size;
-		range[1] = (__uint64_t)(count) * channel->block_size;
+		range[0] = (uint64_t)(block) * channel->block_size;
+		range[1] = (uint64_t)(count) * channel->block_size;
 
 		ret = ioctl(data->dev, BLKDISCARD, &range);
 #else
