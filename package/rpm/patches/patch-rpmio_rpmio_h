--- rpm-4.7.0.orig/rpmio/rpmio.h	2009-03-03 07:51:52.000000000 +0100
+++ rpm-4.7.0/rpmio/rpmio.h	2009-06-25 20:22:25.734966728 +0200
@@ -26,7 +26,8 @@ extern "C" {
  * typedefs to isolate the lossage.
  */
 #if defined(__GLIBC__) && \
-	(__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 2))
+	(__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 2)) && \
+	!defined(__UCLIBC__)
 #define USE_COOKIE_SEEK_POINTER 1
 typedef _IO_off64_t 	_libio_off_t;
 typedef _libio_off_t *	_libio_pos_t;
