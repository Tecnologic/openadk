$Id$
 * fix crash on reading from closed fstream

--- uClibc++-0.2.2.orig/include/fstream	2007-06-04 00:51:12.000000000 +0200
+++ uClibc++-0.2.2/include/fstream	2009-11-20 22:52:48.000000000 +0100
@@ -206,6 +206,9 @@ namespace std{
 				return traits::eof();
 			}
 
+			if(fp == 0)
+				return traits::eof();
+
 			if(basic_streambuf<charT,traits>::eback() == 0){
 				//No buffer, so...
 				charT c;
