--- sangam-atm-1.0.orig/tn7atm.h	2006-04-05 07:33:06.000000000 +0200
+++ sangam-atm-1.0/tn7atm.h	2009-12-17 23:42:04.069784991 +0100
@@ -19,7 +19,8 @@
 //#include  "mips_support.h"
 #include  <linux/list.h>
 
-#include <linux/config.h>
+#define MIPS_EXCEPTION_OFFSET 8
+#define LNXINTNUM(x)((x) + MIPS_EXCEPTION_OFFSET)
 
 #ifdef CONFIG_MODVERSIONS
 #include <linux/modversions.h>
@@ -61,37 +62,6 @@ extern int avalanche_request_pacing(int 
 #include <linux/release.h>
 #endif /* CONFIG_HAS_RELEASE_H_FILE */
 
-/* Base PSP 7.4 support */
-#if ((PSP_VERSION_MAJOR == 7) && (PSP_VERSION_MINOR == 4))
-#define TIATM_INST_SUPP     /* Enable Instrumentation code. */
-#define __NO__VOICE_PATCH__ /* Not required anymore. */
-
-#if defined (CONFIG_MIPS_AVALANCHE_COLORED_LED)
-#include <asm/avalanche/generic/led_manager.h>
-
-/* LED handles */
-extern void *hnd_LED_0; 
-
-#define MOD_ADSL          1
-#define DEF_ADSL_IDLE     1
-#define DEF_ADSL_TRAINING 2
-#define DEF_ADSL_SYNC     3
-#define DEF_ADSL_ACTIVITY 4
-
-#define LED_NUM_1 0
-#define LED_NUM_2 1
-
-#endif /*defined (CONFIG_MIPS_AVALANCHE_COLORED_LED)*/
-
-/* So as to not cause any confusion. */
-#ifdef BASE_PSP_7X
-#undef BASE_PSP_7X
-#endif /*BASE_PSP_7X*/
-
-#define TN7DSL_LED_ACTION(module_handle, module_name, state_id) led_manager_led_action(module_handle, state_id)
-
-#endif /*((PSP_VERSION_MAJOR == 7) && (PSP_VERSION_MINOR == 4)) */
-
 #ifdef CONFIG_LED_MODULE
 #ifndef BASE_PSP_7X
 #include <asm/avalanche/ledapp.h>
@@ -275,4 +245,4 @@ typedef struct
 #define PHYS_TO_K1(X)                             (PHYS_ADDR(X)|K1BASE)
 #endif
 
-#endif __TN7ATM_H
+#endif
