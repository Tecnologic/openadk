--- strace-4.8.orig/signal.c	2013-05-23 15:41:23.000000000 +0200
+++ strace-4.8/signal.c	2013-10-25 14:36:47.000000000 +0200
@@ -43,17 +43,6 @@
 # ifndef PTRACE_POKEUSR
 #  define PTRACE_POKEUSR PTRACE_POKEUSER
 # endif
-#elif defined(HAVE_LINUX_PTRACE_H)
-# undef PTRACE_SYSCALL
-# ifdef HAVE_STRUCT_IA64_FPREG
-#  define ia64_fpreg XXX_ia64_fpreg
-# endif
-# ifdef HAVE_STRUCT_PT_ALL_USER_REGS
-#  define pt_all_user_regs XXX_pt_all_user_regs
-# endif
-# include <linux/ptrace.h>
-# undef ia64_fpreg
-# undef pt_all_user_regs
 #endif
 
 #ifdef IA64
@@ -61,6 +50,7 @@
 #endif
 
 #if defined(SPARC) || defined(SPARC64) || defined(MIPS)
+#include <asm/ptrace.h>
 typedef struct {
 	struct pt_regs		si_regs;
 	int			si_mask;
@@ -815,7 +805,7 @@ sys_sigreturn(struct tcb *tcp)
 {
 #if defined(ARM)
 	if (entering(tcp)) {
-		struct sigcontext_struct sc;
+		struct sigcontext sc;
 		sigset_t sigm;
 		if (umove(tcp, arm_regs.ARM_sp, &sc) < 0)
 			return 0;
