--- squid-3.0.STABLE15.orig/lib/util.c	2009-05-06 13:11:38.000000000 +0200
+++ squid-3.0.STABLE15/lib/util.c	2009-06-04 21:05:19.000000000 +0200
@@ -751,7 +751,8 @@ xstrdup(const char *s)
     /* copy string, including terminating character */
     sz = strlen(s) + 1;
 
-    p = memcpy((char *)xmalloc(sz), s, sz);
+    p = (char *)xmalloc(sz);
+    memcpy(p, s, sz);
 
     PROF_stop(xstrdup);
 
